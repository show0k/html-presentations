<blocks app="Snap! 4.0, http://snap.berkeley.edu" version="1"><block-definition s="$robot poll all motor present positions" type="reporter" category="other"><comment x="0" y="0" w="170" collapsed="false">Return a list of all motors present positions, in the order of &quot;$robot all motors&quot; block list.&#xD;&#xD;Usefull for some advanced programs.</comment><header></header><code></code><inputs></inputs><script><block s="doReport"><block s="reportTextSplit"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot server"></custom-block><l>/motors/get/positions</l></list></block></block><l>;</l></block></block></script></block-definition><block-definition s="for %&apos;i&apos; = %&apos;start&apos; to %&apos;end&apos; %&apos;action&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%upvar"></input><input type="%n">1</input><input type="%n">10</input><input type="%cs"></input></inputs><script><block s="doDeclareVariables"><list><l>step</l><l>tester</l></list></block><block s="doIfElse"><block s="reportGreaterThan"><block var="start"/><block var="end"/></block><script><block s="doSetVar"><l>step</l><l>-1</l></block><block s="doSetVar"><l>tester</l><block s="reifyReporter"><autolambda><block s="reportLessThan"><block var="i"/><block var="end"/></block></autolambda><list></list></block></block></script><script><block s="doSetVar"><l>step</l><l>1</l></block><block s="doSetVar"><l>tester</l><block s="reifyReporter"><autolambda><block s="reportGreaterThan"><block var="i"/><block var="end"/></block></autolambda><list></list></block></block></script></block><block s="doSetVar"><l>i</l><block var="start"/></block><block s="doUntil"><block s="evaluate"><block var="tester"/><list></list></block><script><block s="doRun"><block var="action"/><list></list></block><block s="doChangeVar"><l>i</l><block var="step"/></block></script></block></script></block-definition><block-definition s="reverse %&apos;data&apos;" type="reporter" category="lists"><comment x="0" y="0" w="223" collapsed="false">Reports a new list containing the items of the input list, but in the opposite order.</comment><header></header><code></code><inputs><input type="%l"></input></inputs><script><block s="doDeclareVariables"><list><l>helper</l></list></block><block s="doSetVar"><l>helper</l><block s="reifyScript"><script><block s="doIf"><block s="reportEquals"><block var="input"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block var="result"/></block></script></block><block s="doReport"><block s="evaluate"><block var="helper"/><list><block s="reportCDR"><block var="input"/></block><block s="reportCONS"><block s="reportListItem"><l>1</l><block var="input"/></block><block var="result"/></block></list></block></block></script><list><l>input</l><l>result</l></list></block></block><block s="doWarp"><script><block s="doReport"><block s="evaluate"><block var="helper"/><list><block var="data"/><block s="reportNewList"><list></list></block></list></block></block></script></block></script></block-definition><block-definition s="remove duplicates from %&apos;data&apos;" type="reporter" category="lists"><comment x="0" y="0" w="209" collapsed="false">Reports a new list whose items are the same as in the input list, except that if two or more equal items appear in the input list, only the last one is kept in the result.</comment><header></header><code></code><inputs><input type="%l"></input></inputs><script><block s="doWarp"><script><block s="doIf"><block s="reportEquals"><block var="data"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doIfElse"><block s="reportListContainsItem"><block s="reportCDR"><block var="data"/></block><block s="reportListItem"><l>1</l><block var="data"/></block></block><script><block s="doReport"><custom-block s="remove duplicates from %l"><block s="reportCDR"><block var="data"/></block></custom-block></block></script><script><block s="doReport"><block s="reportCONS"><block s="reportListItem"><l>1</l><block var="data"/></block><custom-block s="remove duplicates from %l"><block s="reportCDR"><block var="data"/></block></custom-block></block></block></script></block></script></block></script></block-definition><block-definition s="sort %&apos;data&apos; ordering with %&apos;function&apos;" type="reporter" category="lists"><comment x="0" y="0" w="204" collapsed="false">Reports a sorted version of the list in its first input slot, using the comparison function in the second input slot.  For a list of numbers, using &lt; as the comparison function will sort from low to high; using &gt; will sort from high to low.</comment><header></header><code></code><inputs><input type="%l"></input><input type="%predRing"></input></inputs><script><block s="doDeclareVariables"><list><l>even items</l><l>odd items</l><l>merge</l></list></block><block s="doSetVar"><l>odd items</l><block s="reifyScript"><script><block s="doIf"><block s="reportEquals"><l></l><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doReport"><block s="reportCONS"><block s="reportListItem"><l>1</l><l/></block><block s="evaluate"><block var="even items"/><list><block s="reportCDR"><l/></block></list></block></block></block></script><list></list></block></block><block s="doSetVar"><l>even items</l><block s="reifyScript"><script><block s="doIf"><block s="reportEquals"><l></l><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doReport"><block s="evaluate"><block var="odd items"/><list><block s="reportCDR"><l/></block></list></block></block></script><list></list></block></block><block s="doSetVar"><l>merge</l><block s="reifyScript"><script><block s="doIf"><block s="reportEquals"><block var="#1"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block var="#2"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="#2"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block var="#1"/></block></script></block><block s="doIfElse"><block s="evaluate"><block var="function"/><list><block s="reportListItem"><l>1</l><block var="#1"/></block><block s="reportListItem"><l>1</l><block var="#2"/></block></list></block><script><block s="doReport"><block s="reportCONS"><block s="reportListItem"><l>1</l><block var="#1"/></block><block s="evaluate"><block var="merge"/><list><block s="reportCDR"><block var="#1"/></block><block var="#2"/></list></block></block></block></script><script><block s="doReport"><block s="reportCONS"><block s="reportListItem"><l>1</l><block var="#2"/></block><block s="evaluate"><block var="merge"/><list><block var="#1"/><block s="reportCDR"><block var="#2"/></block></list></block></block></block></script></block></script><list><l>#1</l><l>#2</l></list></block></block><block s="doIf"><block s="reportEquals"><block var="data"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doIf"><block s="reportEquals"><block s="reportCDR"><block var="data"/></block><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block var="data"/></block></script></block><block s="doReport"><block s="evaluate"><block var="merge"/><list><custom-block s="sort %l ordering with %predRing"><block s="evaluate"><block var="odd items"/><list><block var="data"/></list></block><block var="function"/></custom-block><custom-block s="sort %l ordering with %predRing"><block s="evaluate"><block var="even items"/><list><block var="data"/></list></block><block var="function"/></custom-block></list></block></block></script></block-definition><block-definition s="map %&apos;function&apos; over %&apos;lists&apos;" type="reporter" category="lists"><header></header><code></code><inputs><input type="%repRing"></input><input type="%mult%l"></input></inputs><script><block s="doWarp"><script><block s="doDeclareVariables"><list><l>mapone</l><l>mapmany</l></list></block><block s="doSetVar"><l>mapone</l><block s="reifyScript"><script><block s="doIf"><custom-block s="empty? %l"><block var="data"/></custom-block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doReport"><block s="reportCONS"><block s="evaluate"><block var="function"/><list><block s="reportListItem"><l>1</l><block var="data"/></block></list></block><block s="evaluate"><block var="mapone"/><list><block s="reportCDR"><block var="data"/></block></list></block></block></block></script><list><l>data</l></list></block></block><block s="doSetVar"><l>mapmany</l><block s="reifyScript"><script><block s="doIf"><custom-block s="empty? %l"><block s="reportListItem"><l>1</l><block var="data lists"/></block></custom-block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doReport"><block s="reportCONS"><block s="evaluate"><block var="function"/><custom-block s="map %repRing over %mult%l"><block s="reifyReporter"><autolambda><block s="reportListItem"><l>1</l><l/></block></autolambda><list></list></block><list><block var="data lists"/></list></custom-block></block><block s="evaluate"><block var="mapmany"/><list><custom-block s="map %repRing over %mult%l"><block s="reifyReporter"><autolambda><block s="reportCDR"><l/></block></autolambda><list></list></block><list><block var="data lists"/></list></custom-block></list></block></block></block></script><list><l>data lists</l></list></block></block><block s="doIfElse"><custom-block s="empty? %l"><block s="reportCDR"><block var="lists"/></block></custom-block><script><block s="doReport"><block s="evaluate"><block var="mapone"/><list><block s="reportListItem"><l>1</l><block var="lists"/></block></list></block></block></script><script><block s="doReport"><block s="evaluate"><block var="mapmany"/><list><block var="lists"/></list></block></block></script></block></script></block></script></block-definition><block-definition s="empty? %&apos;data&apos;" type="predicate" category="lists"><header></header><code></code><inputs><input type="%l"></input></inputs><script><block s="doReport"><block s="reportEquals"><block var="data"/><block s="reportNewList"><list></list></block></block></block></script></block-definition><block-definition s="keep items such that %&apos;pred&apos; from %&apos;data&apos;" type="reporter" category="lists"><header></header><code></code><inputs><input type="%predRing"></input><input type="%l"></input></inputs><script><block s="doWarp"><script><block s="doIf"><custom-block s="empty? %l"><block var="data"/></custom-block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doIfElse"><block s="evaluate"><block var="pred"/><list><block s="reportListItem"><l>1</l><block var="data"/></block></list></block><script><block s="doReport"><block s="reportCONS"><block s="reportListItem"><l>1</l><block var="data"/></block><custom-block s="keep items such that %predRing from %l"><block var="pred"/><block s="reportCDR"><block var="data"/></block></custom-block></block></block></script><script><block s="doReport"><custom-block s="keep items such that %predRing from %l"><block var="pred"/><block s="reportCDR"><block var="data"/></block></custom-block></block></script></block></script></block></script></block-definition><block-definition s="combine with %&apos;function&apos; items of %&apos;data&apos;" type="reporter" category="lists"><header></header><code></code><inputs><input type="%repRing"></input><input type="%l"></input></inputs><script><block s="doWarp"><script><block s="doIf"><custom-block s="empty? %l"><block s="reportCDR"><block var="data"/></block></custom-block><script><block s="doReport"><block s="reportListItem"><l>1</l><block var="data"/></block></block></script></block><block s="doReport"><block s="evaluate"><block var="function"/><list><block s="reportListItem"><l>1</l><block var="data"/></block><custom-block s="combine with %repRing items of %l"><block var="function"/><block s="reportCDR"><block var="data"/></block></custom-block></list></block></block></script></block></script></block-definition><block-definition s="for each %&apos;item&apos; of %&apos;data&apos; %&apos;action&apos;" type="command" category="lists"><header></header><code></code><inputs><input type="%upvar"></input><input type="%l"></input><input type="%cs"></input></inputs><script><block s="doUntil"><custom-block s="empty? %l"><block var="data"/></custom-block><script><block s="doSetVar"><l>item</l><block s="reportListItem"><l>1</l><block var="data"/></block></block><block s="doRun"><block var="action"/><list><block s="reportListItem"><l>1</l><block var="data"/></block></list></block><block s="doSetVar"><l>data</l><block s="reportCDR"><block var="data"/></block></block></script></block></script></block-definition><block-definition s="yield" type="command" category="other"><header></header><code></code><inputs></inputs><script><block s="doWait"><l>0.00000000000001</l></block></script></block-definition><block-definition s="$robot error %&apos;message&apos;" type="command" category="other"><header></header><code></code><inputs><input type="%txt"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>message</l></list><l>alert(message);</l></block><list><block var="message"/></list></block></script></block-definition><block-definition s="pool map %&apos;function&apos; over %&apos;lists&apos;" type="reporter" category="lists"><comment x="0" y="0" w="204" collapsed="false">Works as the map block (see map help), but it proceeds iterations concurently.</comment><header></header><code></code><inputs><input type="%repRing"></input><input type="%mult%l"></input></inputs><script><block s="doDeclareVariables"><list><l>results</l><l>iterator</l><l>input_list</l><l>list</l></list></block><block s="doSetVar"><l>results</l><block s="reportNewList"><list></list></block></block><block s="doSetVar"><l>iterator</l><l>0</l></block><block s="doRepeat"><block s="reportListLength"><block s="reportListItem"><l>1</l><block var="lists"/></block></block><script><block s="doChangeVar"><l>iterator</l><l>1</l></block><block s="doSetVar"><l>input_list</l><block s="reportNewList"><list></list></block></block><custom-block s="for each %upvar of %l %cs"><l>list</l><block var="lists"/><script><block s="doAddToList"><block s="reportListItem"><block var="iterator"/><block var="list"/></block><block var="input_list"/></block></script></custom-block><block s="fork"><block s="reifyScript"><script><block s="doAddToList"><block s="evaluate"><block var="function"/><block var="input_list"/></block><block var="results"/></block></script><list></list></block><list></list></block><custom-block s="yield"></custom-block></script></block><block s="doWaitUntil"><block s="reportEquals"><block s="reportListLength"><block var="results"/></block><block s="reportListLength"><block s="reportListItem"><l>1</l><block var="lists"/></block></block></block></block><block s="doReport"><block var="results"/></block></script></block-definition><block-definition s="items %&apos;i&apos; to %&apos;j&apos; of %&apos;list&apos;" type="reporter" category="lists"><comment x="0" y="0" w="146" collapsed="false">Return a sublist which contains items in the interval of 2 input numbers.&#xD;Original list is not modified.</comment><header></header><code></code><inputs><input type="%n"></input><input type="%n"></input><input type="%l"></input></inputs><script><block s="doDeclareVariables"><list><l>result</l></list></block><block s="doSetVar"><l>result</l><block s="reportNewList"><list></list></block></block><block s="doIf"><block s="reportLessThan"><block var="i"/><l>0</l></block><script><block s="doSetVar"><l>i</l><block s="reportSum"><block s="reportListLength"><block var="list"/></block><block var="i"/></block></block></script></block><block s="doIf"><block s="reportLessThan"><block var="j"/><l>0</l></block><script><block s="doSetVar"><l>j</l><block s="reportSum"><block s="reportListLength"><block var="list"/></block><block var="j"/></block></block></script></block><custom-block s="for %upvar = %n to %n %cs"><l>elem</l><custom-block s="if %b then %anyUE else %anyUE"><block var="i"/><block var="i"/><l>1</l></custom-block><custom-block s="if %b then %anyUE else %anyUE"><block var="j"/><block var="j"/><block s="reportListLength"><block var="list"/></block></custom-block><script><block s="doAddToList"><block s="reportListItem"><block var="elem"/><block var="list"/></block><block var="result"/></block></script></custom-block><block s="doReport"><block var="result"/></block></script></block-definition><block-definition s="index of %&apos;var&apos; in %&apos;list&apos;" type="reporter" category="lists"><comment x="0" y="0" w="194" collapsed="false">Return the index of a item in a list</comment><header></header><code></code><inputs><input type="%s"></input><input type="%l"></input></inputs><script><block s="doDeclareVariables"><list><l>i</l></list></block><block s="doSetVar"><l>i</l><l>1</l></block><custom-block s="for each %upvar of %l %cs"><l>m</l><block var="list"/><script><block s="doIf"><block s="reportEquals"><block var="m"/><block var="var"/></block><script><block s="doReport"><block var="i"/></block></script></block><block s="doChangeVar"><l>i</l><l>1</l></block></script></custom-block><block s="doReport"><l>0</l></block></script></block-definition><block-definition s="$robot http:// %&apos;input&apos;" type="reporter" category="other"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doDeclareVariables"><list><l>output</l><l>timer_init</l></list></block><block s="doSetVar"><l>timer_init</l><block s="getTimer"></block></block><block s="doSetVar"><l>output</l><block s="reportNewList"><list></list></block></block><block s="fork"><block s="reifyScript"><script><block s="doAddToList"><block s="reportURL"><block var="input"/></block><block var="output"/></block></script><list></list></block><list></list></block><block s="doWaitUntil"><block s="reportOr"><block s="reportGreaterThan"><block s="reportDifference"><block s="getTimer"></block><block var="timer_init"/></block><l>3.5</l></block><block s="reportGreaterThan"><block s="reportListLength"><block var="output"/></block><l>0</l></block></block></block><block s="doIf"><block s="reportGreaterThan"><block s="reportDifference"><block s="getTimer"></block><block var="timer_init"/></block><l>3</l></block><script><custom-block s="$robot error %txt"><block s="reportJoinWords"><list><l>Robot is not connected to </l><block var="input"/></list></block></custom-block><block s="doReport"><l>error</l></block></script></block><block s="doReport"><block s="reportListItem"><l>1</l><block var="output"/></block></block></script><scripts><script x="452.9853535625002" y="75.0000070000001"><custom-block s="$robot all motors"></custom-block></script><script x="539.8916025624999" y="95.00000100000011"><block s="reportURL"><block var="input"/></block></script><script x="397.2265645" y="240.00000399999993"><block s="doSetVar"><l>output</l><l>0</l></block></script><script x="433" y="179.2"><block s="reportListLength"><l/></block></script><script x="701.5517588124999" y="139.00000500000004"><block s="reportStringSize"><l>world</l></block></script></scripts></block-definition><block-definition s="$robot %&apos;moteur name&apos;" type="reporter" category="sensing"><header></header><code></code><inputs><input type="%txt" readonly="true"><options>head_y
head_z
l_shoulder_y
l_shoulder_x
l_arm_z
l_elbow_y
r_shoulder_y
bust_x
bust_y
abs_z</options></input></inputs><script><block s="doReport"><block var="moteur name"/></block></script></block-definition></blocks>